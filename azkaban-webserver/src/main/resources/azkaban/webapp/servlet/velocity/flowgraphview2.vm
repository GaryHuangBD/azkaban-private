#*
 * Copyright 2012 LinkedIn Corp.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy of
 * the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
*#

  ## Graph view.
<!--[if lt IE 9]>
<?import namespace="v" implementation="#default#VML" ?>
<![endif]-->

<script src="${context}/js/codemirror/lib/codemirror.js"></script>
<link rel="stylesheet" href="${context}/js/codemirror/lib/codemirror.css">
<script src="${context}/js/codemirror/keymap/sublime.js"></script>

<script src="${context}/js/codemirror/mode/shell/shell.js"></script>
<script src="${context}/js/codemirror/mode/sql/sql.js"></script>

<script type="text/javascript">
var property={
	width:1400,
	height:500,
	toolBtns:["start","end","task","node","chat","state","plug","join","fork","complex","command"],
	haveHead:true,
	headBtns:["new","open","save","undo","redo","reload"],//如果haveHead=true，则定义HEAD区的按钮
	haveTool:true,
	haveGroup:false,
	useOperStack:true
};
var remark={
	command:"shell脚本",
	direct:"转换连线",
	start:"开始结点",
	end:"结束结点",
	shell:"shell结点",
	node:"自动结点",
	chat:"决策结点",
	state:"状态结点",
	plug:"附加插件",
	fork:"分支结点",
	"join":"联合结点",
	complex:"复合结点"
};
var flow;
$(document).ready(function(){
	flow=$.createGooFlow($("#flow"),property);
	flow.setNodeRemarks(remark);
	flow.onItemDel=function(id,type){
		return confirm("确定要删除该单元吗?");
	}
	jsondata={
		title:"${flowid}",
		nodes:${gnode},
		lines:${gline}
	};
	flow.$max=9;
	flow.loadData(jsondata);
});
</script>

<div id="flow"></div>



<!-- Modal -->
<div class="fade" id="node_editor" style="position: absolute;top: 10px;z-index:-1;"  tabindex="-1"  role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog"  style="width:1200px;" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">节点信息</h4>
      </div>
      <div class="modal-body" >
      <div id="script_editor"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-primary">保存</button>
      </div>
    </div>
  </div>
</div>






